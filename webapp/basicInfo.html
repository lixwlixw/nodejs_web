<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>datahub-基本信息</title>
<link rel="stylesheet" href="css/bootstrap.min.css">
<link rel="stylesheet" href="css/command.css">
<link rel="stylesheet" href="css/loader.css">
<link rel="stylesheet" href="css/animate.css">
<link rel="stylesheet" href="css/selects.css">
<link rel="stylesheet" href="css/basicInfo.css">

</head>

<style>
	.nav > li > a:hover{
		background-color:rgba(31,154,218,0.7); 
	}	
	.navbar-toggle .icon-bar {
	    background-color: #fff;
	}
	.navbar-nav > li > a:focus{
		background:none;
	}
</style>

<body>


	<div class="be-loader" style="display: block;">
	   	<div class="spinner">
			<div class="spinner-container container1">
				<div class="circle1"></div>
			    <div class="circle2"></div>
			    <div class="circle3"></div>
			    <div class="circle4"></div>
			</div>
		  	<div class="spinner-container container2">
			    <div class="circle1"></div>
			    <div class="circle2"></div>
			    <div class="circle3"></div>
			    <div class="circle4"></div>
		  	</div>
		  	<div class="spinner-container container3">
			    <div class="circle1"></div>
			    <div class="circle2"></div>
			    <div class="circle3"></div>
			    <div class="circle4"></div>
			</div>
		</div>
	</div>
	
	
	<!-- 头部导航 -->
	<header></header>
	
	<!-- 内容页 -->
	<div  class="container main">
	
	<div class="topBox">
		<div style="float:left;margin-top:30px;width:950px;">
		<div  class="top_title">
			<p>账户信息</p>
			
		</div>
		<div  class="top_main">
			<div class="form-group" style="margin-bottom: 15px">
				<label for="exampleInputEmail1">注册邮箱</label>
				<input type="email" class="form-control " id="exampleInputEmail1" placeholder="注册邮箱"
					    style="margin-bottom: 0px;width:480px;">
			</div>
			<div class="form-group">
				<label for="exampleInputTime">注册时间</label>
				<input type="text" class="form-control" id="exampleInputTime" placeholder="注册时间">
			</div>
			<div class="form-group">
				<label for="exampleInputMember">会员级别</label>
				<input type="text" class="form-control" id="exampleInputMember" placeholder="会员级别" disabled="disabled">
			</div>
			<div class="form-group">
				<label for="exampleInputTime">截止时间</label>
				<input type="text" class="form-control" id="exampleStopTime" placeholder="截止时间">
			</div>
		</div>
		</div>
			
	</div>
	<div class="midBox">
		<div style="float:left;margin-top:30px;width:950px;">
		<div  class="mid_title">
			<p>基本信息</p>
		</div>
		<div  class="mid_main">
			<div id="update_icon">
				<span class="span_icon"></span>
			</div>
			<div class="form-group">
				<label for="exampleInputEmail1">名称</label>
				<input type="email" class="form-control " id="exampleInputName" placeholder="企业名称/个人名称"
                       disabled=""  style="margin-bottom: 0px;width:480px;>
			</div>
			<div class="form-group">
				<label for="exampleInputTime">简介</label>
				<textarea id="textComment" class="form-control form-control-self" disabled=""  rows="6" placeholder="基本情况介绍，100字以内"maxlength="100" style="width:480px;"></textarea>
			</div>
			
			 <button type="submit" id="button01" class="btn btn-default">提交</button>
		</div>
		</div>
			
	</div>
	<div class="underBox">
		<div style="float:left;margin-top:30px;width:950px;">
				<div class="under_title">
					<p>资源状态</p>
				</div>
				
				<div  class="under_main">
					<div  class="p_progress">
						<p>Pull量：<span>2000次每天</span></p>
						<div class="progress">
						  <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 40%">
							<span class="sr-only">40% Complete (success)</span>
						  </div>
						</div>
					</div>
					<div class="circle_group">
						
						<div class="circle">
							<div class="pie_left">
								<div class="left"></div>
							</div>
							<div class="pie_right">
								<div class="right"></div>
							</div>
							<div class="mask">
								<div >
									<span>已用</span>
									<span>12</span>
								</div>		
							</div>
							<p>开放Repository：<span>50个</span></p>
						</div>

						<div class="circle1">
							<div class="pie_left1">
								<div class="left1"></div>
							</div>
							<div class="pie_right1">
								<div class="right1"></div>
							</div>
							<div class="mask1">
								<div >
									<span>已用</span>
									<span>5</span>
								</div>		
							</div>
							<p>私有Repository：<span>20个</span></p>
						</div>

						<div class="circle2">
							<div class="pie_left2">
								<div class="left2"></div>
							</div>
							<div class="pie_right2">
								<div class="right2"></div>
							</div>
							<div class="mask2">
								<div >
									<span>已用</span>
									<span>48M</span>
								</div>		
							</div>
							<p>托管空间：<span>200M</span></p>
						</div>
					</div>		
				</div>
			</div>
		</div>
	</div>
	


	<footer></footer>
	
	<div id="loginTem"></div>
	


</body>
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.cookie.js"></script>
<script src="js/ngUrl.js"></script>
<script src="js/login.js"></script>
<script src="js/base64.js"></script>
<script src="js/md5.js"></script>
<script src='js/errorDialog.js'></script>

<script>
$(document).ready(function(){
/*console.log(JSON.stringify($.cookie("token")));*/
		
		$('#exampleInputTime').attr('disabled', 'true');
		$('#exampleStopTime').attr('disabled', 'true');
		$.ajax({
			url:ngUrl+"/users/"+$.cookie("tname"),
			type:"get",
			cache:false,
			async:false,
			headers:{Authorization:"Token "+$.cookie("token")},
			datatype:'json',
				success:function(data){
					var nickName=data.data.nickName;
					var comment=data.data.comment;

                    if (nickName.length>0||comment.length>0)
                    {
                        $("#exampleInputName").val(nickName);
                        $("#textComment").val(comment);
                        $("#exampleInputName").attr("disabled","disabled");
                        $("#textComment").attr("disabled","disabled");
                        $("#button01").css("display","none");
                    }
                    if (nickName.length==0||comment.length==0)
                    {
                        $("#exampleInputName").val(nickName);
                        $("#textComment").val(comment);
                    }
				},
				error:function(){
					errorDialog($.parseJSON(json.responseText).code);
					$('#errorDM').modal('show');

				}
		});
        $("#update_icon").click(function(){
            $("#button01").css("display","block");
            $("#exampleInputName").attr("disabled",false);
            $("#textComment").attr("disabled",false);

        });

		$.ajax({
			url:ngUrl+"/vip/"+$.cookie("tname"),
			type:"get",
			cache:false,
			async:false,
			headers:{Authorization:"Token "+$.cookie("token")},
			datatype:'json',
				success:function(data){
					var email=$.cookie("tname");
					$("#exampleInputEmail1").val(email);
					if (data.data.userType==1)
					{
						$("#exampleInputMember").val("注册用户");
					}	
					else if (data.data.userType==3)
					{
						$("#exampleInputMember").val("认证会员");
					}	
					else if (data.data.userType==4)
					{
						$("#exampleInputMember").val("金卡会员");
					}	
					else if (data.data.userType==5)
					{
						$("#exampleInputMember").val("钻石会员");
					}	
				},
				error:function(json){
					errorDialog($.parseJSON(json.responseText).code);
					$('#errorDM').modal('show');

				}
		});
});


$(document).ready(function(){
	$("#button01").click(function(){
		var mydata = {};
		mydata["nickname"] = $("#exampleInputName").val();
		mydata["comments"] = $("#textComment").val();
		$.ajax({
		url:ngUrl+"/users/"+$.cookie("tname"),
		type:"PUT",
		cache:false,
		async:false,
		beforeSend:function(){
  		  	$('#button01').attr('disabled','disabled');
			$('#button01').text('正在保存中');
  		},
		complete:function(){
			$('#button01').removeAttr('disabled');
			$('#button01').text('提交');
		},

		headers:{Authorization:"Token "+$.cookie("token")},
		datatype:'json',
		data: JSON.stringify(mydata),

		success:function(data){
				
			if(data.code==0){	
				alert("提交成功！");
                $("#exampleInputName").attr("disabled","disabled");
                $("#textComment").attr("disabled","disabled");
                $("#button01").css("display","none");
				}
			},
			error:function(data){
			if(data.code!=0){
				alert("提交失败！");
				}
			}
		});
			
	});
		
});
</script>
	

<script>

	$("a").focus(function(){this.blur()});
	$("header").load("common/header.html");
	$("footer").load("common/footer.html");
	$("#loginTem").load("common/login.html");
	
	var repos=[];
	
	$(window).load(function(){
		$(".be-loader").fadeOut("slow");
	});

	$(document).ready(function(){

	});
</script>