<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="keywords" content="DataHub，批量数据，API数据，流式数据，数据流动，数据交易，运营商数据，空气质量数据，免费数据调用，数据版权保护，大数据，电商数据，物流数据，交通数据"/>
<meta name="description" content="DataHub是国内首个P2P去中心化、P2P大数据流通平台，通过将DataHub协议开源，致力于与全社会一起共建一套数据流通协议，打造数据互联网，让数据流通在阳光下流通。">
<title>基本信息_DataHub阳光下的数据流通平台 全国首个去中心化、P2P大数据流通平台_数据共享经济_ 开源协议_数据互联网_免费数据</title>

<link rel="stylesheet" href="css/bootstrap.min.css">
<link rel="stylesheet" href="css/command.css">

<link rel="stylesheet" href="css/loader.css">
<link rel="stylesheet" href="css/animate.css">
<link rel="stylesheet" href="css/selects.css">
<link rel="stylesheet" href="css/basicPwd.css">

</head>

<style>
	.nav > li > a:hover{
		background-color:rgba(31,154,218,0.7); 
	}	
	.navbar-toggle .icon-bar {
	    background-color: #fff;
	}
	.navbar-nav > li > a:focus{
		background:none;
	}
</style>

<body>


	<div class="be-loader" style="display: block;">
	   	<div class="spinner">
			<div class="spinner-container container1">
				<div class="circle1"></div>
			    <div class="circle2"></div>
			    <div class="circle3"></div>
			    <div class="circle4"></div>
			</div>
		  	<div class="spinner-container container2">
			    <div class="circle1"></div>
			    <div class="circle2"></div>
			    <div class="circle3"></div>
			    <div class="circle4"></div>
		  	</div>
		  	<div class="spinner-container container3">
			    <div class="circle1"></div>
			    <div class="circle2"></div>
			    <div class="circle3"></div>
			    <div class="circle4"></div>
			</div>
		</div>
	</div>
	
	
	<!-- 头部导航 -->
	<header></header>
	
	<!-- 内容页 -->
		<div  class="container" id="main">
	
	<div class="maniBox">
		<div class="alertBox">
			<!--<div class="alert alert-success"id="alert-success" style="display:none" role="alert">修改成功！</div>-->
			<!--<div class="alert alert-danger"id="alert-fail" style="display:none" role="alert">您的提交有误！</div>-->
		</div>
		<div class="Box">
			<div class="titleBox">	
			<p class="pm">修改密码</p>
			</div>
			<div class="labelBox">
				<p id="label_one" style="display: none"><span class="span_icon"></span>旧密码错误，请重新输入</p>
				<p id="label_two" style="display: none"><span class="span_icon"></span>不能少于8位字符，请重新输入</p>
				<p id="label_three" style="display: none"><span class="span_icon"></span>两次密码输入不一致，请重新输入</p>
				<p id="label_fail" style="display: none"><span class="span_icon"></span>您的提交有误!</p>
				<p id="label_success" style="display:none ; color: #1db506;"><span class="success_icon"></span>修改成功!</p>

			</div>
			<div class="contentBox">
				<div class="input-group">
					<input type="password" id="oldpwd" class="form-control form-control-00" placeholder="旧密码" >
					<input type="password" id="passwd"class="form-control form-control-00" placeholder="新密码 请输入8位以上新密码" >
					<input type="password" id="paspasswd" class="form-control form-control-00" placeholder="确认新密码" >
					<!--<div class="lable-div"><label class="label-control-00"></label></div>-->
				</div>
				<div class="btn-group-00">
					  <div class="btn-group btn-group-01 " role="group">
						<button type="button" class="btn btn-default btn0" id="btn01">取消</button>
					  </div>
					  <div class="btn-group btn-group-02 " role="group">
						<button type="button" class="btn btn-default btn0" id="btn02">确认</button>
					  </div>
				</div>
			</div>
			<div id="successBox">
				<p><span class="success_icon"></span>恭喜您，修改密码成功</p>
			</div>
		</div>
	</div>
</div>
	


	<footer></footer>
	
	<div id="loginTem"></div>
	


</body>
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.cookie.js"></script>
<script src="js/ngUrl.js"></script>
<script src="js/login.js"></script>
<script src="js/base64.js"></script>
<script src="js/md5.js"></script>
<script>

	$("a").focus(function(){this.blur()});
	$("header").load("common/header.html");
	$("footer").load("common/footer.html");
	$("#loginTem").load("common/login.html");
	
	var repos=[];
	
	$(window).load(function(){
		$(".be-loader").fadeOut("slow");
	});

	$(document).ready(function(){

	});
</script>
<script>
/*	$(document).ready(function(){
		$(window).load(function(){
			$("#btn01").mouseover(function(){
				$("#btn01").css({"background":"#29abe2","color":"white"});
				$("#btn02").css({"background":"#efefef","color":"black"});
			});	
			$("#btn02").mouseover(function(){
				$("#btn02").css({"background":"#29abe2","color":"white"});
				$("#btn01").css({"background":"#efefef","color":"black"});
			});	
		});
	});*/
	$(document).ready(function(){

		$("#btn01").click(function(){
			$(".form-control-00").val("");
		});
		$("#paspasswd").blur(function(){
			if(($("#passwd").val())!=($("#paspasswd").val())){
				$("#label_three").css("display", "inline");
				$("#label_two").css("display", "none");
				$("#label_one").css("display", "none");
				$("#label_fail").css("display","none");
				$("#label_three").fadeOut(4000);
			}
		});
		$("#passwd").blur(function(){
			if($("#passwd").val().length<8){
				$("#label_two").css("display", "inline");
				$("#label_one").css("display", "none");
				$("#label_three").css("display", "none");
				$("#label_fail").css("display","none");
				$("#label_two").fadeOut(4000);
			}
		});
		$("#oldpwd").blur(function(){
			//验证密码是否正确?pwd=abc
			var oldpwd=$.md5($("#oldpwd").val());
			var oldsure="";
			$.ajax({
				url:ngUrl+"/users/"+$.cookie("tname")+"/pwd"+"/validate"+"?pwd="+oldpwd,
				type:"GET",
				cache:false,
				async:false,
				headers:{Authorization:"Token "+$.cookie("token")},
				datatype:'json',
				success:function(data){
					if(data.code==8004)
					{
						oldsure=false;
					}
					if(data.code==0)
					{
						oldsure=true;
					}
				},
				error:function(data){
				}
			});
			//验证密码是否正确结束
			if(oldsure==false){
				$("#label_two").css("display", "none");
				$("#label_one").css("display", "inline");
				$("#label_three").css("display", "none");
				$("#label_fail").css("display","none");
				$("#label_one").fadeOut(4000);
			}
		});
		$("#btn02").click(function(){
			var myPwd = {};
			myPwd["passwd"]=$.md5($("#passwd").val());
			myPwd["oldpwd"]=$.md5($("#oldpwd").val());
			var  pwd1=$("#passwd").val();
			var  pwd2=$("#paspasswd").val();
			if (pwd1==pwd2)
			{
				$.ajax({
				url:ngUrl+"/users/"+$.cookie("tname")+"/pwd",
				type:"PUT",
				cache:false,
				async:false,
				headers:{Authorization:"Token "+$.cookie("token")},
				datatype:'json',
				data:JSON.stringify(myPwd),
				success:function(data){
					if((data.code==0)&&(pwd1==pwd2)&&($("#passwd").val().length>=8)&&($("#paspasswd").val().length>=8)){
//						$("#label_success").css("display","inline");
//						$("#label_success").append();
//						$("#label_success").fadeOut(3000);
//						$(".form-control-00").val("");
						$("#successBox").css("display","inline");
						$(".form-control-00").css("display","none");
						$(".btn0").css("display","none");

					}
					else
					{
						$("#label_fail").css("display","inline");
						$("#label_two").css("display", "none");
						$("#label_one").css("display", "none");
						$("#label_three").css("display", "none");
						$("#successBox").css("display","none");
						$("#label_fail").append();
						$("#label_fail").fadeOut(3000);
					}

				},
				error:function(data){
					if(data.code!=0){
						$("#alert-fail").css("display","inline");
						$("#alert-fail").append();
					}			
				}
			});
			}
		});



	});


</script>
